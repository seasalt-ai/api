{
  "openapi": "3.0.2",
  "info": {
    "title": "SeaX Analytics API",
    "description": "The SeaX Analytics API provides comprehensive analytics and reporting capabilities for the SeaX platform. This unified endpoint allows you to generate multiple types of analytics data in a single request.\n\n## Authentication\n\nAll endpoints require API key authentication. Include your API key in the request headers:\n\n```http\nX-API-Key: your-api-key-here\n```\nTo get your workspace API key:\n\n1. **SeaX Workspace**:\n\n   - You need a SeaX workspace because all APIs access data at the workspace level.\n\n\n2. **Generate an API Key**:\n\n   - Login to [SeaX](https://seax.seasalt.ai)\n   - Go to the Workspace â†’ API Key tab.\n   - Click Add New Key and create a new API key.\n   - Enable API access and copy your key. This key will be required for all API requests and please protect it with extreme caution.\n\n\n\n## Endpoint\n\n### POST https://seax.seasalt.ai/analytics-api/v1/generate_metric_report\n\nGenerate analytics data based on the requested metrics. This unified endpoint supports multiple analytics types and can return data for one or more metrics in a single request.\n\n#### Request Body\n\n```json\n{\n  \"metrics\": [\"conversation_overview\", \"communication_volume\"],\n  \"message_type\": \"messages\",\n  \"time_unit\": \"month\",\n  \"timezone\": \"UTC\",\n  \"start_date\": \"2024-01-01T00:00:00Z\",\n  \"end_date\": \"2024-01-31T23:59:59Z\",\n  \"range_type\": \"last_30_days\",\n  \"exclude_empty_response\": false,\n  \"labels\": [\"support\", \"sales\"],\n  \"year\": \"2024\"\n}\n```\n\n#### Request Parameters\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| `metrics` | `array[string]` | **Yes** | List of analytics metrics to generate. See [Available Metrics](#available-metrics) |\n| `message_type` | `string` | No | Type of messages to analyze: `messages` or `calls`. Default: `messages` |\n| `time_unit` | `string` | No | Time unit for aggregation: `day`, `month`, or `year`. Default: `month` |\n| `timezone` | `string` | No | Timezone for date calculations. Default: `UTC` |\n| `start_date` | `string` | Conditional | Start date for time range (ISO 8601 format). Required for certain metrics |\n| `end_date` | `string` | Conditional | End date for time range (ISO 8601 format). Required for certain metrics |\n| `range_type` | `string` | Conditional | Predefined time range. See [Range Types](#range-types) |\n| `exclude_empty_response` | `boolean` | No | Exclude conversations with no inbound messages. Default: `false` |\n| `labels` | `array[string]` | No | Filter by specific label names or IDs |\n| `year` | `string` | Conditional | Year for yearly overview (YYYY format). Required for `conversation_overview_yearly` |\n\n## Available Metrics\n\n### 1. Conversation Overview (`conversation_overview`)\n\nProvides comprehensive conversation statistics with period-over-period comparisons.\n\n**Required Parameters:** `range_type`\n\n**Response Structure:**\n```json\n{\n  \"conversation_overview\": {\n    \"conversations\": 100,\n    \"messages\": 500,\n    \"bot_messages\": 200,\n    \"agent_messages\": 150,\n    \"live_agent_requests\": 50,\n    \"distinct_user_count\": 75,\n    \"conversations_change_percentage\": 10.5,\n    \"messages_change_percentage\": 5.0,\n    \"bot_messages_change_percentage\": 8.0,\n    \"agent_messages_change_percentage\": 12.0,\n    \"live_agent_requests_change_percentage\": 15.0,\n    \"current_period_start\": \"2024-01-01T00:00:00Z\",\n    \"current_period_end\": \"2024-01-31T23:59:59Z\",\n    \"previous_period_start\": \"2023-12-01T00:00:00Z\",\n    \"previous_period_end\": \"2023-12-31T23:59:59Z\"\n  }\n}\n```\n\n### 2. Yearly Conversation Overview (`conversation_overview_yearly`)\n\nProvides yearly conversation statistics with monthly breakdowns.\n\n**Required Parameters:** `year`\n\n**Response Structure:**\n```json\n{\n  \"conversation_overview_yearly\": {\n    \"total_conversations\": 1200,\n    \"total_messages\": 6000,\n    \"average_messages_per_conversation\": 5.0,\n    \"monthly_messages\": {\n      \"January\": 500,\n      \"February\": 450,\n      \"March\": 520\n    }\n  }\n}\n```\n\n### 3. Conversation Breakdown (`conversation_breakdown`)\n\nDetailed breakdown of conversations by channel, day, and hour.\n\n**Required Parameters:** `start_date`, `end_date`\n\n**Response Structure:**\n```json\n{\n  \"conversation_breakdown\": {\n    \"channel_summary\": {\n      \"WebChat\": {\n        \"user_count\": 100,\n        \"message_count\": 1200\n      },\n      \"SMS\": {\n        \"user_count\": 80,\n        \"message_count\": 800\n      }\n    },\n    \"messages_by_day\": {\n      \"Monday\": 100,\n      \"Tuesday\": 150,\n      \"Wednesday\": 120\n    },\n    \"messages_by_hour\": {\n      \"0\": 50,\n      \"1\": 30,\n      \"9\": 200,\n      \"14\": 180\n    }\n  }\n}\n```\n\n### 4. Label Overview (`label_overview`)\n\nOverview of all conversation labels and their usage counts.\n\n**Required Parameters:** None\n\n**Response Structure:**\n```json\n{\n  \"label_overview\": [\n    {\n      \"name\": \"support\",\n      \"count\": 150\n    },\n    {\n      \"name\": \"sales\",\n      \"count\": 89\n    }\n  ]\n}\n```\n\n### 5. Communication Volume (`communication_volume`)\n\nVoice and text message volume statistics for a specified period.\n\n**Required Parameters:** `start_date`, `end_date`\n\n**Response Structure:**\n```json\n{\n  \"communication_volume\": {\n    \"inbound_voice_count\": 120,\n    \"outbound_voice_count\": 95,\n    \"inbound_non_voice_count\": 850\n  }\n}\n```\n\n### 6. Activity Trend (`activity_trend`)\n\nAnalyzes activity patterns over time with configurable time units.\n\n**Required Parameters:** `start_date`, `end_date`\n**Optional Parameters:** `message_type`, `time_unit`\n\n**Response Structure:**\n```json\n{\n  \"activity_trend\": {\n    \"time_unit\": \"month\",\n    \"data\": [\n      {\n        \"period\": \"2024-01\",\n        \"count\": 450\n      },\n      {\n        \"period\": \"2024-02\",\n        \"count\": 520\n      }\n    ]\n  }\n}\n```\n\n### 7. Label Usage (`label_usage`)\n\nTracks label usage trends over time with optional label filtering.\n\n**Required Parameters:** `start_date`, `end_date`\n**Optional Parameters:** `time_unit`, `labels`\n\n**Response Structure:**\n```json\n{\n  \"label_usage\": [\n    {\n      \"period\": \"2024-01\",\n      \"labels\": [\n        {\n          \"name\": \"support\",\n          \"count\": 45\n        },\n        {\n          \"name\": \"sales\",\n          \"count\": 23\n        }\n      ]\n    }\n  ]\n}\n```\n\n### 8. Total Usage (`total_usage`)\n\nComprehensive usage summary including voice minutes and chat responses.\n\n**Optional Parameters:** `start_date`, `end_date`\n\n**Response Structure:**\n```json\n{\n  \"total_usage\": {\n    \"total_voice_minutes\": null,\n    \"total_chat_responses\": 1250\n  }\n}\n```\n\n### Range Types\n\nPredefined time ranges that can be used instead of specifying exact dates:\n\n| Range Type | Description | Days |\n|------------|-------------|------|\n| `last_day` | Last 24 hours | 1 |\n| `last_7_days` | Last 7 days | 7 |\n| `last_30_days` | Last 30 days | 30 |\n| `last_90_days` | Last 90 days | 90 |\n| `last_180_days` | Last 180 days | 180 |\n\n### Time Units\n\n- `day` - Daily aggregation\n- `month` - Monthly aggregation  \n- `year` - Yearly aggregation\n\n### Message Types\n\n- `messages` - Text messages and chat interactions\n- `calls` - Voice call interactions\n\n### Example Requests\n\n#### Single Metric Request\n\n```bash\ncurl -X POST \"https://seax.seasalt.ai/analytics-api/v1/generate_metric_report\" \\\n  -H \"X-API-Key: your-api-key-here\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"metrics\": [\"conversation_overview\"],\n    \"range_type\": \"last_30_days\",\n    \"timezone\": \"America/New_York\"\n  }'\n```\n\n#### Multiple Metrics Request\n\n```bash\ncurl -X POST \"https://seax.seasalt.ai/analytics-api/v1/generate_metric_report\" \\\n  -H \"X-API-Key: your-api-key-here\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"metrics\": [\"communication_volume\", \"activity_trend\", \"label_usage\"],\n    \"start_date\": \"2024-01-01T00:00:00Z\",\n    \"end_date\": \"2024-01-31T23:59:59Z\",\n    \"time_unit\": \"day\",\n    \"labels\": [\"support\", \"sales\"]\n  }'\n```\n\n#### Yearly Overview Request\n\n```bash\ncurl -X POST \"https://seax.seasalt.ai/analytics-api/v1/generate_metric_report\" \\\n  -H \"X-API-Key: your-api-key-here\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"metrics\": [\"conversation_overview_yearly\"],\n    \"year\": \"2024\",\n    \"timezone\": \"UTC\"\n  }'\n```\n\n### Error Responses\n\nThe API returns standard HTTP status codes and detailed error messages:\n\n#### 400 Bad Request\n\n```json\n{\n  \"detail\": \"Range type is required for conversation overview\"\n}\n```\n\n#### 401 Unauthorized\n\n```json\n{\n  \"detail\": \"Invalid API key\"\n}\n```\n\n#### 422 Validation Error\n\n```json\n{\n  \"detail\": [\n    {\n      \"loc\": [\"body\", \"metrics\"],\n      \"msg\": \"field required\",\n      \"type\": \"value_error.missing\"\n    }\n  ]\n}\n```\n",
    "version": "Beta"
  },
  "paths": {
    "/analytics-api/v1/generate_metric_report": {
      "post": {
        "tags": [
          "Analytics"
        ],
        "summary": "Generate Analytics",
        "description": "Generate analytics data based on the requested metrics.\n\nArgs:\n    workspace_id: The workspace ID to generate analytics for\n    request: Analytics request containing metrics and parameters\n\nReturns:\n    Dictionary containing requested analytics data",
        "operationId": "generate_analytics_v1_generate_metric_report_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AnalyticsRequestType"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "title": "Response Generate Analytics V1 Generate Metric Report Post",
                  "type": "object"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "APIKeyHeader": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {
      "AnalyticsMessageType": {
        "title": "AnalyticsMessageType",
        "enum": [
          "messages",
          "calls"
        ],
        "type": "string",
        "description": "An enumeration."
      },
      "AnalyticsMetric": {
        "title": "AnalyticsMetric",
        "enum": [
          "communication_volume",
          "activity_trend",
          "label_usage",
          "label_overview",
          "conversation_overview",
          "total_usage",
          "conversation_overview_yearly",
          "conversation_breakdown"
        ],
        "type": "string",
        "description": "An enumeration."
      },
      "AnalyticsRequestType": {
        "title": "AnalyticsRequestType",
        "required": [
          "metrics"
        ],
        "type": "object",
        "properties": {
          "metrics": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AnalyticsMetric"
            },
            "description": "List of analytics metrics to generate"
          },
          "message_type": {
            "allOf": [
              {
                "$ref": "#/components/schemas/AnalyticsMessageType"
              }
            ],
            "description": "messages or calls",
            "default": "messages"
          },
          "time_unit": {
            "allOf": [
              {
                "$ref": "#/components/schemas/AnalyticsTimeUnit"
              }
            ],
            "description": "Time unit for aggregation",
            "default": "month"
          },
          "timezone": {
            "title": "Timezone",
            "type": "string",
            "description": "User timezone, defaults to UTC",
            "default": "UTC"
          },
          "start_date": {
            "title": "Start Date",
            "type": "string",
            "description": "Start date for the time range",
            "format": "date-time"
          },
          "end_date": {
            "title": "End Date",
            "type": "string",
            "description": "End date for the time range",
            "format": "date-time"
          },
          "range_type": {
            "allOf": [
              {
                "$ref": "#/components/schemas/RangeTypeEnum"
              }
            ],
            "description": "Time range type"
          },
          "exclude_empty_response": {
            "title": "Exclude Empty Response",
            "type": "boolean",
            "description": "Exclude conversations with no inbound messages"
          },
          "labels": {
            "title": "Labels",
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of label names or IDs to filter by"
          },
          "year": {
            "title": "Year",
            "type": "string",
            "description": "Year for yearly conversation overview (YYYY)"
          }
        },
        "description": "Query parameters schema for fetching analytics data through the unified endpoint."
      },
      "AnalyticsTimeUnit": {
        "title": "AnalyticsTimeUnit",
        "enum": [
          "day",
          "month",
          "year"
        ],
        "type": "string",
        "description": "An enumeration."
      },
      "HTTPValidationError": {
        "title": "HTTPValidationError",
        "type": "object",
        "properties": {
          "detail": {
            "title": "Detail",
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            }
          }
        }
      },
      "RangeTypeEnum": {
        "title": "RangeTypeEnum",
        "enum": [
          "last_day",
          "last_7_days",
          "last_30_days",
          "last_90_days",
          "last_180_days"
        ],
        "type": "string",
        "description": "Range type enum."
      },
      "ValidationError": {
        "title": "ValidationError",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "type": "object",
        "properties": {
          "loc": {
            "title": "Location",
            "type": "array",
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            }
          },
          "msg": {
            "title": "Message",
            "type": "string"
          },
          "type": {
            "title": "Error Type",
            "type": "string"
          }
        }
      }
    },
    "securitySchemes": {
      "APIKeyHeader": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-KEY"
      }
    }
  }
}